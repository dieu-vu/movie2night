# MovieTonight App
Mobile project at Metropolia UAS

[Demo video](https://www.youtube.com/watch?v=8y5Tb2Stexk&feature=youtu.be)

Team member: Dung Tran, Dieu Vu, Thanh Tran

## Run the App
1. Install Android Studio:
[Link to download Android Studio](https://developer.android.com/studio?gclid=Cj0KCQiA2af-BRDzARIsAIVQUOegnlm_V6W7UdtvmBmKbhlZcjJnPJeRJwOqNqZD-LK2bt-wXA7WuQoaAsAyEALw_wcB&gclsrc=aw.ds)
2. Git clone https://github.com/dieu-vu/movie2night.git to local machine
3. Open Android Studio:
  File --> Open
4. Choose emulator to run the app:
  Tools --> AVD Manager --> choose the device to run
5. Run --> run app

## JAVADoc of the App
https://users.metropolia.fi/~dungtra/AndroidProject1/
## Getting movie data from IMDB and process to get Json data file
Link for the source data: https://www.imdb.com/interfaces/
### Process with the data
* Data from the source is free to use and consist of many tables under tsv format. However, they are very large data file with sizes up to 1-3GB. Therefore, we process the data in python first.
* We join data from titles.basics.tsv with titles.ratings.tsv by movie ids (field 'tconst')
    * Firstly: ratings data is sorted by highest to lowest
    * Only select 10,000 first lines as the data is too big
    * Get the first 100 movies from titles.basics data that have type 'movie', year after 2010 and ids matched with ids existing in the list of 10,000 first rated movies above
    * Urls for each movie entry is generated by concatenate movie id with the url template for each movie page on IMDb
    * At the end, we get the data set of movie data with 100 records, top rated, from the year 2010. This is saved to json file to use as asset files in our Android App
    * We save the json file "sorted_data.json" to the assets folder in Android app and use to get the movie data into the app

## Helper classes:
1. JSONParser
* getJsonFromAssets: Read and convert json file from assets folder to String format. This method is used when initiate Data in class MovieUtils.
* makeJson methods are used to create json objects for user class.
2. Movie Utils
* To use as a Singleton to get the MovieUtils methods to process with the movie data in different activities.
* Important methods in this class:
    * When instance of the class is called, it will check if the shared preferences of "movie_data" have any data. If not, it will initiate the data from sorted_data.json file in the assets folder.
    * initData() method: This method gets the string from json data file and converts it to an array list of Movie object. Then we use gson to serialize the list of Movie objects and write to shared preferences for later use.
    * the MovieUtils instance is called only when we hit the Search button in Search Activity.
    * getAllMovies() method: get all movies data from shared preferences and convert it to an ArrayList of Movie objects.
    * searchMovie() method: received the array list of Movie objects from getAllMovie() and performs the search using user's age and search texts from TextView in Search activity.
3. sharedPrefsWriter
* Helper class to process with updating user data with new user input in other activity.
